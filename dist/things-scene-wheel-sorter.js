!function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){e.exports=scene},function(e,t,r){e.exports=r(2)},function(e,t,r){"use strict";r.r(t);var a=r(0);const n=["#ccc","#afd0f1","#afd0f1","#ffba00","#e9746b"],l=["#999","#87b1db","#87b1db","#d96f21","#a73928"];const o=[function(e){var{height:t}=e.bounds,{rollWidth:r=10,animated:a}=e.model,o=Math.max(r,1),i=n[e.value]||n[0],s=l[e.value]||l[0],h=Math.min(1,o/10);o+=2*h,e._roller_pattern||(e._roller_pattern=document.createElement("canvas"));var u=Math.floor(2*o/3);e._roller_pattern.width=o+u,e._roller_pattern.height=t;var d=e._roller_pattern.getContext("2d");if(d.beginPath(),d.fillStyle=i,d.strokeStyle=s,d.lineWidth=h,d.ellipse(h+o/2,t-o/4-h,o/2,o/4,0,0,Math.PI),d.moveTo(h,t-o/4),d.lineTo(h,o/4),d.ellipse(h+o/2,o/4+h,o/2,o/4,0,Math.PI,0),d.lineTo(h+o,t-o/4),d.fill(),d.stroke(),d.globalAlpha=.2,d.lineWidth=o/3,a){var c=e._step%o;2==e.value&&(c=o-c),d.moveTo(c,t-o/4),d.lineTo(c,o/4),d.stroke()}return e._roller_pattern},function(e){var{height:t}=e.bounds,{rollWidth:r=10}=e.model,a=Math.max(r,1),o=n[e.value]||n[0],i=l[e.value]||l[0];e._roller_pattern||(e._roller_pattern=document.createElement("canvas")),e._roller_pattern.width=a,e._roller_pattern.height=t;var s=e._roller_pattern.getContext("2d");s.beginPath(),s.fillStyle=o,s.strokeStyle=i,s.lineWidth=1,s.moveTo(0,0),s.lineTo(a,0),s.lineTo(a,t),s.lineTo(0,t),s.lineTo(0,0),s.fill(),s.beginPath(),s.globalAlpha=.2;var h=(e._step||0)%a;return 2==e.value&&(h=a-h),s.moveTo(h,t),s.lineTo(h,0),s.stroke(),e._roller_pattern}];var i=e=>{var t=class extends(Object(a.ValueHolder)(e)){dispose(){super.dispose(),delete this._roller_pattern}animOnState(){if(!(1!==this.value&&2!==this.value||this.disposed)){(!this._step||this._step>4e4)&&(this._step=0==this.value),this._step++;var e=this;requestAnimationFrame(function(){e.clearCache("fillStyle"),e.invalidate()})}}get conveyorType(){var e=this.get("conveyorType");return 1!=e&&0!=e&&(e=0),e}get fillStyle(){return{image:o[this.conveyorType](this),offsetX:0,offsetY:0,type:"pattern"}}};return a.Component.memoize(t.prototype,"fillStyle",!1),a.Component.memoize(t.prototype,"conveyorType",!1),t};const s={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"select",label:"conveyor-type",name:"conveyorType",property:{options:[{display:"Roller",value:0},{display:"Belt",value:1}]}},{type:"number",label:"roll-width",name:"rollWidth"},{type:"number",label:"value",name:"value"},{type:"checkbox",label:"animation",name:"animated"}]};class h extends(i(Object(a.RectPath)(a.Shape))){get nature(){return s}render(e){var{width:t,height:r,left:a,top:n,animated:l=!1}=this.model;l&&this.animOnState(),e.beginPath(),e.rect(a,n,t,r)}is3dish(){return!1}}a.Component.register("conveyor",h),a.Component.register("conveyor-belt",h);const u={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"select",label:"conveyor-type",name:"conveyorType",property:{options:[{display:"Roller",value:0},{display:"Belt",value:1}]}},{type:"angle",label:"start-angle",name:"startAngle"},{type:"angle",label:"end-angle",name:"endAngle"},{type:"number",label:"ratio",name:"ratio"},{type:"number",label:"roll-width",name:"rollWidth"},{type:"number",label:"value",name:"value"},{type:"checkbox",label:"animation",name:"animated"}]};Math.PI;var d={ondragmove:function(e,t,r){var{cx:a,rx:n}=r.model,l=(r.transcoordP2S(e.x,e.y).x-a)/n*100;l=l>=100||l<=-100?100:Math.abs(l),r.set({ratio:l})}},c={ondragmove:function(e,t,r){var{cx:a,cy:n}=r.model,l=r.transcoordP2S(e.x,e.y),o=Math.atan2(-(l.y-n),l.x-a);o>0&&o<=Math.PI/2&&(o=Math.PI/2),o<0&&o>=-Math.PI/2&&(o=-Math.PI/2);var i=-o+Math.PI/2;r.set({startAngle:i})}},p={ondragmove:function(e,t,r){var{cx:a,cy:n}=r.model,l=r.transcoordP2S(e.x,e.y),o=Math.atan2(-(l.y-n),l.x-a);o>0&&o>=Math.PI/2&&(o=Math.PI/2),o<0&&o<=-Math.PI/2&&(o=-Math.PI/2);var i=-o+Math.PI/2;r.set({endAngle:i})}};class m extends(i(a.Donut)){get nature(){return u}is3dish(){return!1}render(e){var{ratio:t=50,cx:r,cy:a,rx:n,ry:l,startAngle:o=0,endAngle:i=Math.PI/2,animated:s=!1}=this.model;s&&this.animOnState(),e.beginPath(),o-=Math.PI/2,i-=Math.PI/2,e.ellipse(r,a,Math.abs(n),Math.abs(l),0,o,i),e.ellipse(r,a,Math.abs(n/100*t),Math.abs(l/100*t),0,i,o,!0),e.lineTo(n*Math.cos(o)+r,n*Math.sin(o)+a)}get controls(){var{cx:e,cy:t,rx:r,ratio:a,startAngle:n,endAngle:l}=this.model,o=[];return o.push({x:e+(r+r*a/100)/2*Math.sin(n),y:t-(r+r*a/100)/2*Math.cos(n),handler:c}),o.push({x:e+(r+r*a/100)/2*Math.sin(l),y:t-(r+r*a/100)/2*Math.cos(l),handler:p}),o.push({x:e+r/100*a,y:t,handler:d}),o}}a.Component.register("conveyor-join",m);const b={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"select",label:"conveyor-type",name:"conveyorType",property:{options:[{display:"Roller",value:0},{display:"Belt",value:1}]}},{type:"number",label:"roll-width",name:"rollWidth"},{type:"number",label:"value",name:"value"},{type:"checkbox",label:"animation",name:"animated"}]};class v extends(i(a.Polygon)){get nature(){return b}is3dish(){return!1}render(e){this.get("animated")&&this.animOnState(),super.render(e)}}a.Component.register("conveyor-join-trapezoid",v);const y=["#ccc","#afd0f1","#ffba00","#e9746b"],f=["#999","#87b1db","#d96f21","#a73928"];var g=e=>{var t=class extends(Object(a.ValueHolder)(e)){animOnState(){if(1===this.value&&!this.disposed){var e=this,t=Math.floor(100*Math.random());t=t<10?2:t>90?1:0,requestAnimationFrame(function(){e.delta("tilt",t),e.clearCache("fillStyle"),e.invalidate()})}}_draw_pattern(e){var{width:t,height:r,left:a,top:n}=this.bounds,{tilt:l=0,wheelSize:o=3}=this.model;l+=this.delta("tilt")||0,l%=3,l-=1;var i=y[this.value]||y[0],s=f[this.value]||f[0],h=10*o||Math.min(t/5,r/5);e.beginPath(),e.fillStyle=i,e.rect(a,n,t,r),e.fill(),e.strokeStyle=s,e.lineWidth=1,this._draw_wheel(e,h,l)}_draw_circle(e,t){for(var{width:r,height:a}=this.bounds,n=0,l=0;l<a;){for(n=0;n<r;)e.moveTo(n+t/2+t/3,l+t/2),e.ellipse(n+t/2,l+t/2,t/3,t/3,0,0,2*Math.PI,0),n+=t;l+=t}e.stroke()}_draw_inner(e,t,r){for(var{width:a,height:n}=this.bounds,l=0,o=0;o<n;){for(l=0;l<a;)e.translate(l,o),e.beginPath(),e.translate(t/2,t/2),e.rotate(r),e.moveTo(-t/6,-t/6),e.lineTo(-t/6,t/6),e.moveTo(t/6,-t/6),e.lineTo(t/6,t/6),e.stroke(),e.rotate(-r),e.translate(-t/2,-t/2),e.translate(-l,-o),l+=t;o+=t}}_draw_wheel(e,t,r){var{left:a,top:n}=this.bounds;e.beginPath(),e.translate(a,n),this._draw_circle(e,t),this._draw_inner(e,t,r)}};return a.Component.memoize(t.prototype,"fillStyle",!1),t};const _={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"tilt",name:"tilt"},{type:"number",label:"wheel-size",name:"wheelSize"},{type:"number",label:"value",name:"value"},{type:"checkbox",label:"animation",name:"animated"}]};class T extends(g(Object(a.RectPath)(a.Shape))){get nature(){return _}render(e){var{width:t,height:r,left:a,top:n,animated:l}=this.model;l&&this.animOnState(),e.beginPath(),e.rect(a,n,t,r),e.clip()}postrender(e){super.postrender(e),this._draw_pattern(e)}is3dish(){return!1}}a.Component.register("wheel-sorter",T);const P=["rgba(0,0,0,.4)","rgba(175,208,241,.7)","rgba(255,186,0,.7)","rgba(198,50,40,.7)"],x=["rgba(0,0,0,.7)","rgba(175,208,241,1)","rgba(255,186,0,1)","rgba(198,50,40,1)"];var M=e=>{var t=class extends(Object(a.ValueHolder)(e)){dispose(){super.dispose(),delete this._scanner_pattern}get fillStyle(){return{image:function(e){var{width:t,height:r}=e.bounds,a=P[e.value]||P[0],n=x[e.value]||x[0];e._scanner_pattern||(e._scanner_pattern=document.createElement("canvas")),e._scanner_pattern.width=t,e._scanner_pattern.height=r;var l,o=e._scanner_pattern.getContext("2d"),i=0,s=0;o.beginPath(),o.fillStyle=a,o.strokeStyle=n,o.rect(0,0,t,r),o.fill(),l=t/40,i=t/4,s=r/4,o.beginPath(),o.fillStyle="rgba(0,0,0,.7)",o.strokeStyle=null,o.moveTo(i+l,s),o.lineTo(i+t/2-l,s),o.quadraticCurveTo(i+t/2,s,i+t/2,s+l),o.lineTo(i+t/2,s+r/2-l),o.quadraticCurveTo(i+t/2,s+r/2,i+t/2-l,s+r/2),o.lineTo(i+l,s+r/2),o.quadraticCurveTo(i,s+r/2,i,s+r/2-l),o.lineTo(i,s+l),o.quadraticCurveTo(i,s,i+l,s),o.fill(),i+=.1*t,s+=.05*r;var h=0,u=.3*t,d=.4*r;return o.beginPath(),o.fillStyle="#fff",o.moveTo(i,s),o.rect(i,s+h,u,d/14*.9),h=d/14*2,o.rect(i,s+h,u,d/14*.3),h=d/14*4,o.rect(i,s+h,u,d/14*.4),h=d/14*6,o.rect(i,s+h,u,d/14*.8),h=d/14*8,o.rect(i,s+h,u,d/14*.6),h=d/14*10,o.rect(i,s+h,u,d/14),h=d/14*11,o.rect(i,s+h,u,d/14),h=d/14*14,o.rect(i,s+h,u,d/14*.3),o.fill(),o.beginPath(),i=t/2,s=.1*r,o.strokeStyle="#cc3300",o.lineWidth=1,o.moveTo(i,s),o.lineTo(i,.9*r),o.stroke(),e._scanner_pattern}(this),offsetX:0,offsetY:0,type:"pattern",fitPattern:!0}}};return a.Component.memoize(t.prototype,"fillStyle",!1),t};const S={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"value",name:"value"},{type:"number",label:"round",name:"round"}]};class w extends(M(Object(a.RectPath)(a.Shape))){get nature(){return S}render(e){var{width:t,height:r,left:a,top:n}=this.model,l=t/10;e.beginPath(),e.moveTo(a+l,n),e.lineTo(a+t-l,n),e.quadraticCurveTo(a+t,n,a+t,n+l),e.lineTo(a+t,n+r-l),e.quadraticCurveTo(a+t,n+r,a+t-l,n+r),e.lineTo(a+l,n+r),e.quadraticCurveTo(a,n+r,a,n+r-l),e.lineTo(a,n+l),e.quadraticCurveTo(a,n,a+l,n),e.clip()}is3dish(){return!1}}a.Component.register("scanner",w),r.d(t,"Conveyor",function(){return h}),r.d(t,"ConveyorJoin",function(){return m}),r.d(t,"ConveyorJoinTrapezoid",function(){return v}),r.d(t,"WheelSorter",function(){return T}),r.d(t,"Scanner",function(){return w})}]);
//# sourceMappingURL=things-scene-wheel-sorter.js.map